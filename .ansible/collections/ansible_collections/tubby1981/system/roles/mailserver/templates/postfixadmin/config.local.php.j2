<?php
// PostfixAdmin Configuration
// Generated by Ansible for {{ mailserver_hostname }}
// Mode: {{ mailserver_server_mode }}

$CONF['configured'] = true;

// Database Configuration
$CONF['database_type'] = 'mysqli';
$CONF['database_host'] = 'localhost';
$CONF['database_user'] = '{{ mailserver_db_user }}';
$CONF['database_password'] = '{{ mailserver_db_password }}';
$CONF['database_name'] = '{{ mailserver_db_name }}';

// Site Configuration
$CONF['default_language'] = 'en';
$CONF['admin_email'] = '{{ mailserver_postfixadmin_admin_email }}';

// Password Configuration
$CONF['encrypt'] = 'dovecot:ARGON2I';
$CONF['dovecotpw'] = "/usr/bin/doveadm pw -r 5";

// Setup Password
$CONF['setup_password'] = '{{ mailserver_setup_password_hash.stdout }}';

// Domain Configuration
$CONF['domain_path'] = 'YES';
$CONF['domain_in_mailbox'] = 'NO';

{% if mailserver_server_mode == 'forwarding' %}
// Forwarding mode: No mailboxes
$CONF['quota'] = 'NO';
$CONF['mailboxes'] = '0';
$CONF['maxquota'] = '0';
{% else %}
// Mailbox mode: Enable quotas
$CONF['quota'] = 'YES';
$CONF['quota_multiplier'] = '1024000';
$CONF['new_quota_table'] = 'YES';
$CONF['mailboxes'] = '10';
$CONF['maxquota'] = '100';
{% endif %}

// Aliases
$CONF['aliases'] = '10';

$CONF['default_aliases'] = array (
    'abuse' => '{{ mailserver_postfixadmin_admin_email }}',
    'hostmaster' => '{{ mailserver_postfixadmin_admin_email }}',
    'postmaster' => '{{ mailserver_postfixadmin_admin_email }}',
    'webmaster' => '{{ mailserver_postfixadmin_admin_email }}'
);

// Footer
$CONF['show_footer_text'] = 'YES';
$CONF['footer_text'] = 'Return to {{ mailserver_hostname }}';
$CONF['footer_link'] = 'https://{{ mailserver_hostname }}';

// Features
$CONF['vacation'] = 'NO';
$CONF['special_alias_control'] = 'YES';
$CONF['backup'] = 'YES';

// Mail Server Settings
$CONF['smtp_server'] = 'localhost';
$CONF['smtp_port'] = '25';

// Theme
$CONF['theme_logo'] = 'images/logo-default.png';
$CONF['theme_css'] = 'css/default.css';

// Logging
$CONF['logging'] = 'YES';

// Display
$CONF['show_status'] = 'YES';
$CONF['show_undeliverable'] = 'YES';
$CONF['show_custom_count'] = array('admin','domain');

// Password validation
$CONF['min_password_length'] = 8;

{% if mailserver_server_mode in ['mailboxes', 'both'] %}
// Mailbox creation
$CONF['create_mailbox_subdirs'] = array('Drafts','Sent','Trash','Junk');
$CONF['used_quotas'] = 'YES';
{% endif %}

// Scripts (leave empty)
$CONF['mailbox_postcreation_script'] = '';
$CONF['mailbox_postdeletion_script'] = '';
$CONF['mailbox_postedit_script'] = '';
$CONF['domain_postcreation_script'] = '';
$CONF['domain_postdeletion_script'] = '';
$CONF['domain_postedit_script'] = '';
$CONF['alias_postcreation_script'] = '';
$CONF['alias_postdeletion_script'] = '';
$CONF['alias_postedit_script'] = '';

?>
