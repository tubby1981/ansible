# Authentication for SQL users
# Generated by Ansible

driver = mysql

connect = host=127.0.0.1 dbname={{ mailserver_db_name }} user={{ mailserver_db_user }} password={{ mailserver_db_password }}

password_query = \
  SELECT username AS user, password \
  FROM mailbox \
  WHERE username = '%u' AND active = 1

user_query = \
  SELECT CONCAT('{{ mailserver_storage_path }}/', maildir) AS home, \
         {{ mailserver_uid }} AS uid, \
         {{ mailserver_gid }} AS gid \
  FROM mailbox \
  WHERE username = '%u' AND active = 1

iterate_query = \
  SELECT username AS user FROM mailbox WHERE active = 1
